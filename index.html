<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>قائمة المهام</title>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    /* -- (كلما كان سبق – انسخه كما هو من كودك القديم من <style> وحتى @media --) */
    * {margin:0;padding:0;box-sizing:border-box;}
    body {font-family:'Amiri',serif;background:linear-gradient(135deg,#fefefe,#f8f8f8);min-height:100vh;color:#5d4e37;position:relative;overflow-x:hidden;}
    /* – آثار النخيل– */
    body::before,.palm-tree {pointer-events:none;z-index:-1;opacity:0.06;position:fixed;}
    body::before {content:'';top:0;left:0;width:100%;height:100%;
      background-image:
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22" opacity="0.1"><path d="M100 200 Q80 150 60 120 Q40 90 20 80 Q50 85 80 100 Q90 110 100 130 Q110 110 120 100 Q150 85 180 80 Q160 90 140 120 Q120 150 100 200 Z"/><rect x="95" y="200" width="10" height="80" fill="%238B4513"/><ellipse cx="100" cy="280" rx="20" ry="8" fill="%23228B22"/></g></svg>'),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22" opacity="0.08"><path d="M100 180 Q85 140 70 115 Q55 90 35 85 Q60 88 85 100 Q95 108 100 125 Q105 108 115 100 Q140 88 165 85 Q145 90 130 115 Q115 140 100 180 Z"/><rect x="95" y="180" width="10" height="70" fill="%238B4513"/><ellipse cx="100" cy="250" rx="18" ry="7" fill="%23228B22"/></g></svg>');
      background-size:300px 400px,250px 350px;
      background-position:-50px 20%,calc(100%+50px) 60%;
      background-repeat:no-repeat;
    }
    .palm-tree-1 {top:10%;left:5%;width:180px;height:250px;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22"><path d="M100 200 Q80 150 60 120 Q40 90 20 80 Q50 85 80 100 Q90 110 100 130 Q110 110 120 100 Q150 85 180 80 Q160 90 140 120 Q120 150 100 200 Z"/><rect x="95" y="200" width="10" height="80" fill="%238B4513"/><ellipse cx="100" cy="280" rx="20" ry="8" fill="%23228B22"/></g></svg>') no-repeat center;background-size:contain;}
    .palm-tree-2 {top:40%;right:8%;width:160px;height:220px;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22"><path d="M100 180 Q85 140 70 115 Q55 90 35 85 Q60 88 85 100 Q95 108 100 125 Q105 108 115 100 Q140 88 165 85 Q145 90 130 115 Q115 140 100 180 Z"/><rect x="95" y="180" width="10" height="70" fill="%238B4513"/><ellipse cx="100" cy="250" rx="18" ry="7" fill="%23228B22"/></g></svg>') no-repeat center;background-size:contain;}
    .palm-tree-3 {bottom:20%;left:10%;width:140px;height:190px;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22"><path d="M100 160 Q88 125 75 105 Q62 85 45 82 Q65 84 85 92 Q92 98 100 110 Q108 98 115 92 Q135 84 155 82 Q138 85 125 105 Q112 125 100 160 Z"/><rect x="95" y="160" width="10" height="60" fill="%238B4513"/><ellipse cx="100" cy="220" rx="15" ry="6" fill="%23228B22"/></g></svg>') no-repeat center;background-size:contain;}
    .login-screen, .hidden {display:none;} .login-screen.active{display:flex;}
    .login-container{background:rgba(255,255,255,0.95);backdrop-filter:blur(15px);border-radius:30px;padding:50px;text-align:center;border:2px solid rgba(139,69,19,0.3);box-shadow:0 15px 35px rgba(139,69,19,0.2);max-width:400px;width:90%;}
    .login-title{font-family:'Scheherazade New',serif;font-size:3rem;font-weight:700;background:linear-gradient(45deg,#8b4513,#d2691e,#a0522d);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:30px;}
    .google-signin-btn{background:#4285f4;color:#fff;border:none;border-radius:25px;padding:15px 30px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s;box-shadow:0 4px 15px rgba(66,133,244,.3);display:flex;align-items:center;gap:10px;margin:0 auto;}
    .google-signin-btn:hover{background:#357ae8;transform:translateY(-2px);box-shadow:0 6px 20px rgba(66,133,244,.4);}
    /* – استمرّ بنسخ باقي الستايل الأصلي (الهيدر، المدخل، المهام، الفوتر...) */
    /* ... */
  </style>
</head>
<body>
  <div class="palm-tree palm-tree-1"></div>
  <div class="palm-tree palm-tree-2"></div>
  <div class="palm-tree palm-tree-3"></div>

  <div id="loginScreen" class="login-screen active">
    <div class="login-container">
      <h1 class="login-title" id="loginTitle">قائمة المهام</h1>
      <p id="loginSubtitle" style="margin-bottom:30px;color:#8b7355;">سجل دخولك للمتابعة</p>
      <div id="googleSignInBtn"></div>
    </div>
  </div>

  <div id="mainApp" class="hidden">
    <!-- – هنا كل ما يخص واجهة التطبيق: الهيدر، المدخل، قائمة المهام، الفوتر -->
    <!-- انسخ واجهة mainApp بالكامل من كودك السابق -->
  </div>

  <div class="footer">Developed by Rasil</div>

  <script>
    let tasks = [], taskId = 1, currentLang = 'ar', currentCategory = 'daily', currentUser = null;
    const translations = {
      ar: { title:'قائمة المهام', loginSubtitle:'سجل دخولك للمتابعة', googleSignIn:'تسجيل دخول بجوجل', placeholder:'اكتب مهمة جديدة...', addBtn:'إضافة مهمة', clearBtn:'مسح الكل', completeBtn:'إنجاز', undoBtn:'إلغاء', deleteBtn:'حذف', logoutBtn:'خروج', emptyState:'لا توجد مهام في هذه الفئة<br>ابدأ بإضافة مهمة جديدة!', langToggle:'English', dailyTab:'المهام اليومية', weeklyTab:'المهام الأسبوعية', monthlyTab:'المهام الشهرية', yearlyTab:'الأهداف السنوية', confirmClear:'هل أنت متأكد من حذف جميع المهام؟'},
      en: { title:'To-Do List', loginSubtitle:'Sign in to continue', googleSignIn:'Sign in with Google', placeholder:'Write a new task...', addBtn:'Add Task', clearBtn:'Clear All', completeBtn:'Complete', undoBtn:'Undo', deleteBtn:'Delete', logoutBtn:'Logout', emptyState:'No tasks in this category<br>Start by adding a new task!', langToggle:'العربية', dailyTab:'Daily Tasks', weeklyTab:'Weekly Tasks', monthlyTab:'Monthly Tasks', yearlyTab:'Year Goals', confirmClear:'Are you sure you want to delete all tasks?'}
    };

    function handleCredentialResponse(response) {
      const payload = JSON.parse(atob(response.credential.split('.')[1]));
      currentUser = { name: payload.name, picture: payload.picture, sub: payload.sub };
      loadTasks(); onSignIn(); updateLanguage(); updateTaskCounts(); renderTasksUI();
    }

    function renderGoogleButton() {
      google.accounts.id.initialize({
        client_id: 'YOUR_CLIENT_ID.apps.googleusercontent.com',
        callback: handleCredentialResponse
      });
      google.accounts.id.renderButton(
        document.getElementById('googleSignInBtn'),
        { theme:'outline', size:'large', locale: currentLang }
      );
    }

    function init() {
      renderGoogleButton();
    }

    function onSignIn() {
      document.getElementById('loginScreen').classList.remove('active');
      document.getElementById('mainApp').classList.remove('hidden');
      document.getElementById('userName').textContent = currentUser.name;
      document.getElementById('userAvatar').src = currentUser.picture;
    }

    function logout() {
      currentUser = null; tasks = []; saveTasks();
      google.accounts.id.disableAutoSelect();
      document.getElementById('mainApp').classList.add('hidden');
      document.getElementById('loginScreen').classList.add('active');
    }

    function saveTasks() {
      if (currentUser) localStorage.setItem(`tasks_${currentUser.sub}`, JSON.stringify(tasks));
    }
    function loadTasks() {
      if (currentUser) {
        const data = localStorage.getItem(`tasks_${currentUser.sub}`);
        tasks = data ? JSON.parse(data) : [];
      }
    }

    function updateLanguage() { /* – انسخ من كودك الأصلي */ }
    function setupEventListeners() { /* – انسخ إذا كانت لديك مثل on clear, add, toggle lang */ }
    function switchCategory(cat) { currentCategory = cat; renderTasksUI(); updateTaskCounts(); }
    function addTask() { /* – إنشاء المهمة + push على tasks */ saveTasks(); renderTasksUI(); updateTaskCounts(); }
    function clearAllTasks() { if (confirm(translations[currentLang].confirmClear)) { tasks = []; saveTasks(); renderTasksUI(); updateTaskCounts(); } }
    function renderTasksUI() { /* – تفريغ #tasksList، إضافة كل مهمة حسب الفئة */ }
    function updateTaskCounts() { /* – عد المهام حسب كل فئة + عرض العدد */ }

    window.onload = init;
  </script>
</body>
</html>
