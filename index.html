<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قائمة المهام</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Amiri', serif;
            background: linear-gradient(135deg, #fefefe 0%, #f8f8f8 100%);
            min-height: 100vh;
            color: #5d4e37;
            position: relative;
            overflow-x: hidden;
        }

        /* Palm Tree Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22" opacity="0.1"><path d="M100 200 Q80 150 60 120 Q40 90 20 80 Q50 85 80 100 Q90 110 100 130 Q110 110 120 100 Q150 85 180 80 Q160 90 140 120 Q120 150 100 200 Z"/><rect x="95" y="200" width="10" height="80" fill="%238B4513"/><ellipse cx="100" cy="280" rx="20" ry="8" fill="%23228B22"/></g></svg>'),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22" opacity="0.08"><path d="M100 180 Q85 140 70 115 Q55 90 35 85 Q60 88 85 100 Q95 108 100 125 Q105 108 115 100 Q140 88 165 85 Q145 90 130 115 Q115 140 100 180 Z"/><rect x="95" y="180" width="10" height="70" fill="%238B4513"/><ellipse cx="100" cy="250" rx="18" ry="7" fill="%23228B22"/></g></svg>');
            background-size: 300px 400px, 250px 350px;
            background-position: -50px 20%, calc(100% + 50px) 60%;
            background-repeat: no-repeat;
            pointer-events: none;
            z-index: -1;
        }

        .palm-tree {
            position: fixed;
            opacity: 0.06;
            pointer-events: none;
            z-index: -1;
        }

        .palm-tree-1 {
            top: 10%;
            left: 5%;
            width: 180px;
            height: 250px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22"><path d="M100 200 Q80 150 60 120 Q40 90 20 80 Q50 85 80 100 Q90 110 100 130 Q110 110 120 100 Q150 85 180 80 Q160 90 140 120 Q120 150 100 200 Z"/><rect x="95" y="200" width="10" height="80" fill="%238B4513"/><ellipse cx="100" cy="280" rx="20" ry="8" fill="%23228B22"/></g></svg>') no-repeat center;
            background-size: contain;
        }

        .palm-tree-2 {
            top: 40%;
            right: 8%;
            width: 160px;
            height: 220px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22"><path d="M100 180 Q85 140 70 115 Q55 90 35 85 Q60 88 85 100 Q95 108 100 125 Q105 108 115 100 Q140 88 165 85 Q145 90 130 115 Q115 140 100 180 Z"/><rect x="95" y="180" width="10" height="70" fill="%238B4513"/><ellipse cx="100" cy="250" rx="18" ry="7" fill="%23228B22"/></g></svg>') no-repeat center;
            background-size: contain;
        }

        .palm-tree-3 {
            bottom: 20%;
            left: 10%;
            width: 140px;
            height: 190px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><g fill="%23228B22"><path d="M100 160 Q88 125 75 105 Q62 85 45 82 Q65 84 85 92 Q92 98 100 110 Q108 98 115 92 Q135 84 155 82 Q138 85 125 105 Q112 125 100 160 Z"/><rect x="95" y="160" width="10" height="60" fill="%238B4513"/><ellipse cx="100" cy="220" rx="15" ry="6" fill="%23228B22"/></g></svg>') no-repeat center;
            background-size: contain;
        }

        /* Login Screen */
        .login-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .login-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            padding: 50px;
            text-align: center;
            border: 2px solid rgba(139, 69, 19, 0.3);
            box-shadow: 0 15px 35px rgba(139, 69, 19, 0.2);
            max-width: 400px;
            width: 90%;
        }

        .login-title {
            font-family: 'Scheherazade New', serif;
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(45deg, #8b4513, #d2691e, #a0522d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
        }

        .demo-login-btn {
            background: linear-gradient(45deg, #8b4513, #a0522d);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto 0;
            font-family: 'Amiri', serif;
        }

        .demo-login-btn:hover {
            background: linear-gradient(45deg, #a0522d, #8b4513);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid rgba(139, 69, 19, 0.3);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #8b4513;
        }

        .user-name {
            font-weight: 600;
            color: #5d4e37;
        }

        .logout-btn {
            background: #722f37;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #8b1538;
            transform: scale(1.05);
        }

        /* Header Styling */
        .header {
            text-align: center;
            padding: 40px 20px 20px;
            position: relative;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid rgba(139, 69, 19, 0.2);
            margin-bottom: 30px;
        }

        .header-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .lang-toggle {
            background: linear-gradient(45deg, #8b4513, #a0522d);
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            color: #f5f5dc;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .lang-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .title {
            font-family: 'Scheherazade New', serif;
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(45deg, #8b4513, #d2691e, #a0522d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.3);
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Category Tabs */
        .category-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .category-tab {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(139, 69, 19, 0.3);
            border-radius: 25px;
            padding: 12px 24px;
            color: #5d4e37;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1rem;
            position: relative;
        }

        .category-tab.active {
            background: linear-gradient(45deg, #8b4513, #a0522d);
            border-color: #8b4513;
            color: #f5f5dc;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .category-tab:hover {
            transform: translateY(-2px);
            border-color: #8b4513;
        }

        .task-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #722f37;
            color: #f5f5dc;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Input Section */
        .input-section {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(139, 69, 19, 0.3);
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.2);
        }

        .input-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .input-row {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
        }

        #taskInput {
            flex: 1;
            max-width: 600px;
            padding: 15px 25px;
            border: 2px solid rgba(139, 69, 19, 0.3);
            border-radius: 50px;
            font-size: 1.1rem;
            font-family: 'Amiri', serif;
            background: rgba(255, 255, 255, 0.95);
            color: #5d4e37;
            outline: none;
            transition: all 0.3s ease;
        }

        #taskInput:focus {
            border-color: #8b4513;
            box-shadow: 0 0 20px rgba(139, 69, 19, 0.3);
            transform: scale(1.02);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Amiri', serif;
        }

        .add-btn {
            background: linear-gradient(45deg, #8b4513, #a0522d);
            color: #f5f5dc;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .clear-btn {
            background: linear-gradient(45deg, #722f37, #8b1538);
            color: #f5f5dc;
            box-shadow: 0 4px 15px rgba(114, 47, 55, 0.3);
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(114, 47, 55, 0.4);
        }

        /* Tasks Container */
        .tasks-container {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            border: 2px solid rgba(139, 69, 19, 0.3);
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.2);
            min-height: 400px;
        }

        .task-item {
            background: rgba(255, 255, 255, 0.9);
            margin-bottom: 15px;
            padding: 20px;
            border-radius: 20px;
            border-right: 4px solid #8b4513;
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease;
            position: relative;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.1);
        }

        .task-item:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateX(-5px);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.2);
        }

        .task-item.completed {
            opacity: 0.7;
            background: rgba(107, 142, 35, 0.1);
            border-right-color: #6b8e23;
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .task-text {
            font-size: 1.3rem;
            color: #5d4e37;
            font-weight: 600;
            flex: 1;
            background: linear-gradient(45deg, #5d4e37, #8b4513, #5d4e37);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shine 3s ease-in-out infinite;
        }

        @keyframes shine {
            0% { background-position: -200% 0; }
            50% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
            animation: none;
            -webkit-text-fill-color: #8b7355;
        }

        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #8b7355;
            margin-bottom: 15px;
        }

        .task-category {
            background: rgba(139, 69, 19, 0.8);
            color: #f5f5dc;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .task-date {
            font-weight: 500;
        }

        .task-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .task-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Amiri', serif;
        }

        .complete-btn {
            background: linear-gradient(45deg, #6b8e23, #556b2f);
            color: #f5f5dc;
        }

        .complete-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(107, 142, 35, 0.3);
        }

        .delete-btn {
            background: linear-gradient(45deg, #722f37, #8b1538);
            color: #f5f5dc;
        }

        .delete-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(114, 47, 55, 0.3);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: rgba(93, 78, 55, 0.7);
            font-size: 1.2rem;
        }

        .empty-state .icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .footer {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            color: #5d4e37;
            border: 2px solid rgba(139, 69, 19, 0.3);
            font-family: 'Amiri', serif;
        }

        .hidden {
            display: none !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }

            .input-row {
                flex-direction: column;
            }

            .category-tabs {
                flex-direction: column;
                align-items: center;
            }

            .action-buttons {
                flex-direction: column;
            }

            .task-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="palm-tree palm-tree-1"></div>
    <div class="palm-tree palm-tree-2"></div>
    <div class="palm-tree palm-tree-3"></div>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <h1 class="login-title" id="loginTitle">قائمة المهام</h1>
            <p id="loginSubtitle" style="margin-bottom: 30px; color: #8b7355;">ابدأ بإدارة مهامك الآن</p>
            
            <!-- Single Demo Login Button -->
            <button id="demoLoginBtn" class="demo-login-btn" onclick="demoLogin()">
                <svg width="20" height="20" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <span id="demoLoginText">ابدأ استخدام التطبيق</span>
            </button>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <div class="header">
            <div class="header-controls">
                <div class="user-info">
                    <img id="userAvatar" src="https://via.placeholder.com/40/8b4513/f5f5dc?text=👤" alt="User" class="user-avatar">
                    <span id="userName" class="user-name">المستخدم</span>
                    <button id="logoutBtn" class="logout-btn" onclick="logout()">
                        <span id="logoutText">خروج</span>
                    </button>
                </div>
                <button class="lang-toggle" onclick="toggleLanguage()">
                    <span id="langText">English</span>
                </button>
            </div>
            <h1 class="title" id="mainTitle">قائمة المهام</h1>
        </div>

        <div class="container">
            <div class="category-tabs">
                <div class="category-tab active" data-category="daily" onclick="switchCategory('daily')">
                    <span id="dailyTab">المهام اليومية</span>
                    <div class="task-count" id="dailyCount">0</div>
                </div>
                <div class="category-tab" data-category="weekly" onclick="switchCategory('weekly')">
                    <span id="weeklyTab">المهام الأسبوعية</span>
                    <div class="task-count" id="weeklyCount">0</div>
                </div>
                <div class="category-tab" data-category="monthly" onclick="switchCategory('monthly')">
                    <span id="monthlyTab">المهام الشهرية</span>
                    <div class="task-count" id="monthlyCount">0</div>
                </div>
                <div class="category-tab" data-category="yearly" onclick="switchCategory('yearly')">
                    <span id="yearlyTab">الأهداف السنوية</span>
                    <div class="task-count" id="yearlyCount">0</div>
                </div>
            </div>

            <div class="input-section">
                <div class="input-form">
                    <div class="input-row">
                        <input type="text" id="taskInput" placeholder="اكتب مهمة جديدة..." />
                    </div>
                    <div class="action-buttons">
                        <button class="btn add-btn" onclick="addTask()">
                            <span id="addBtnText">إضافة مهمة</span>
                        </button>
                        <button class="btn clear-btn" onclick="clearAllTasks()">
                            <span id="clearBtnText">مسح الكل</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="tasks-container">
                <div id="tasksList">
                    <div class="empty-state">
                        <div class="icon">🎯</div>
                        <p id="emptyMessage">لا توجد مهام في هذه الفئة<br>ابدأ بإضافة مهمة جديدة!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        Developed by Rasil
    </div>

    <script>
        // Global variables
        let tasks = [];
        let taskId = 1;
        let currentLang = 'ar';
        let currentCategory = 'daily';
        let currentUser = null;

        // Language translations
        const translations = {
            ar: {
                title: 'قائمة المهام',
                loginTitle: 'قائمة المهام',
                loginSubtitle: 'ابدأ بإدارة مهامك الآن',
                demoLogin: 'ابدأ استخدام التطبيق',
                placeholder: 'اكتب مهمة جديدة...',
                addBtn: 'إضافة مهمة',
                clearBtn: 'مسح الكل',
                completeBtn: 'إنجاز',
                undoBtn: 'إلغاء',
                deleteBtn: 'حذف',
                logoutBtn: 'خروج',
                emptyState: 'لا توجد مهام في هذه الفئة<br>ابدأ بإضافة مهمة جديدة!',
                langToggle: 'English',
                dailyTab: 'المهام اليومية',
                weeklyTab: 'المهام الأسبوعية',
                monthlyTab: 'المهام الشهرية',
                yearlyTab: 'الأهداف السنوية',
                confirmClear: 'هل أنت متأكد من حذف جميع المهام؟'
            },
            en: {
                title: 'To-Do List',
                loginTitle: 'To-Do List',
                loginSubtitle: 'Start managing your tasks now',
                demoLogin: 'Start Using App',
                placeholder: 'Enter a new task...',
                addBtn: 'Add Task',
                clearBtn: 'Clear All',
                completeBtn: 'Complete',
                undoBtn: 'Undo',
                deleteBtn: 'Delete',
                logoutBtn: 'Logout',
                emptyState: 'No tasks in this category<br>Start by adding a new task!',
                langToggle: 'العربية',
                dailyTab: 'Daily Tasks',
                weeklyTab: 'Weekly Tasks',
                monthlyTab: 'Monthly Tasks',
                yearlyTab: 'Yearly Goals',
                confirmClear: 'Are you sure you want to delete all tasks?'
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadTasks();
            updateTaskCounts();
            filterTasks();
        });

        // Demo login function
        function demoLogin() {
            currentUser = {
                name: currentLang === 'ar' ? 'مستخدم تجريبي' : 'Demo User',
                avatar: 'https://via.placeholder.com/40/8b4513/f5f5dc?text=👤'
            };
            
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userAvatar').src = currentUser.avatar;
            
            // Hide login screen and show main app
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
        }

        // Logout function
        function logout() {
            currentUser = null;
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        // Add task function
        function addTask() {
            const taskInput = document.getElementById('taskInput');
            const taskText = taskInput.value.trim();
            
            if (taskText === '') {
                alert(currentLang === 'ar' ? '
